<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Rock Paper Scissors</title>
</head>

<body>

    <button class="button" id="rock">Rock</button>
    <button class="button" id="paper">Paper</button>
    <button class="button" id="scissors">Scissors</button>

    <p id="user_choice"></p>
    <p id="comp_choice"></p>
    <p id="result"></p>
    <p id="scores"></p>
    <p id="game"></p>
    <script>

        // Initialise
        let game = 0;
        let i_won = 0;
        let you_won = 0;
        let drawn = 0;
        initialise();

        // Add event listener for buttons
        const buttons = document.querySelectorAll('.button');
        buttons.forEach(button => button.addEventListener('click', playRound));

        // Functions
        function initialise() {
            game = 0;
            i_won = 0;
            you_won = 0;
            drawn = 0;
            document.getElementById("user_choice").innerHTML = '';
            document.getElementById("comp_choice").innerHTML = '';
            document.getElementById("result").innerHTML = '';
            document.getElementById("game").innerHTML = '';
        }

        function displayScores() {
            let score = 'Games Played ' + game + ' - You Won ' + you_won + ' - I Won ' + i_won + ' - Drawn ' + drawn;
            document.getElementById("scores").innerHTML = score;
        }

        function playRound(e) {

            if (you_won >= 5 || i_won >= 5) {
                initialise();
            }

            let user_choice = this.id;
            let comp_choice = computerPlay();
            let result = '';
            game++;

            switch (user_choice) {
                case 'rock':
                    if (comp_choice == "rock") {
                        result = "It's a draw! We both went for Rock!";
                        drawn++;
                        break;
                    }

                    if (comp_choice == "scissors") {
                        result = 'You won! Rock crushes scissors!';
                        you_won++;
                        break;
                    }

                    if (comp_choice == "paper") {
                        result = 'I won! Paper covers Rock!';
                        i_won++;
                        break;
                    }
                case 'paper':
                    if (comp_choice == "paper") {
                        result = "It's a draw! We both went for Paper!";
                        drawn++;
                        break;
                    }

                    if (comp_choice == "scissors") {
                        result = 'I won! Scissors cuts Paper!';
                        i_won++;
                        break;
                    }

                    if (comp_choice == "rock") {
                        result = 'You won! Paper covers Rock!';
                        you_won++;
                        break;
                    }

                case 'scissors':
                    if (comp_choice == "scissors") {
                        result = "It's a draw! We both went for Scissors!";
                        drawn++;
                        break;
                    }

                    if (comp_choice == "paper") {
                        result = 'You won! Scissors cuts Paper!';
                        you_won++;
                        break;
                    }

                    if (comp_choice == "rock") {
                        result = 'I won! Rock crushes Scissors!';
                        i_won++;
                        break;
                    }
            }

            // Display result in DOM
            document.getElementById("user_choice").innerHTML = 'Your choice - ' + user_choice;
            document.getElementById("comp_choice").innerHTML = 'My choice - ' + comp_choice;
            document.getElementById("result").innerHTML = result;
            displayScores();

            if (you_won >= 5) {
                document.getElementById("game").innerHTML = 'You won! First to 5!';
            }

            if (i_won >= 5) {
                document.getElementById("game").innerHTML = 'I won! First to 5!';
            }

        }

        function computerPlay() {
            let index = Math.floor(Math.random() * 3);
            switch (index) {
                case 0:
                    return "rock";
                    break;
                case 1:
                    return "paper";
                    break;
                case 2:
                    return "scissors";
                    break;
            }
        }

    </script>


</body>

</html>